# Avatar 视频访问说明

## 当前Avatar状态
- Avatar ID: `g`
- 服务端口: `8615`
- 服务状态: ✅ 运行中
- 服务器IP: `172.18.0.2` (Docker内部IP)

## 🌐 如何确定访问地址

### 情况1：在服务器本机上访问（本地浏览器）
使用 `localhost` 或 `127.0.0.1`

### 情况2：从其他电脑访问
需要使用**宿主机的实际IP地址**（不是172.18.0.2）

查看宿主机IP的方法：
```bash
# 在宿主机上运行（不是Docker容器内）
hostname -I
# 或者
ip addr show
```

## 访问方式

### 方法1：WebRTC API 页面（推荐，最简单）✅
**不需要SRS服务器，可以直接使用**

**在服务器本机访问：**
```
http://localhost:8615/webrtcapi.html
```

**从其他机器访问：**
```
http://宿主机IP:8615/webrtcapi.html
```

操作步骤：
1. 打开浏览器访问上面的地址
2. 点击 "Start" 按钮建立连接
3. 视频会自动开始播放

### 方法2：Dashboard 页面
**需要启动SRS流媒体服务器（端口1985）**

**在服务器本机访问：**
```
http://localhost:8615/dashboard.html
```

**从其他机器访问：**
```
http://宿主机IP:8615/dashboard.html
```

注意：此方法需要先启动SRS服务器，否则无法播放视频。

### 方法3：前端测试页面

```
http://localhost:前端端口/avatar-test.html
```

## 切换Avatar

使用以下命令切换到不同的avatar：

```bash
# 切换到 yongen
python /workspace/murphy/capstone-project-25t3-9900-virtual-tutor-phase-2/lip-sync/test_switch.py yongen

# 切换到 g
python /workspace/murphy/capstone-project-25t3-9900-virtual-tutor-phase-2/lip-sync/test_switch.py g

# 切换到 test_yongen
python /workspace/murphy/capstone-project-25t3-9900-virtual-tutor-phase-2/lip-sync/test_switch.py test_yongen
```

## 测试视频是否可以访问

```bash
# 测试8615端口是否可以访问
curl http://127.0.0.1:8615/webrtcapi.html -I
```

## 常见问题

### 1. 无法打开视频
- **原因**：可能使用了dashboard.html，但SRS服务器未运行
- **解决**：改用 webrtcapi.html

### 2. 切换avatar后视频黑屏
- **原因**：旧的WebRTC连接还在使用旧avatar
- **解决**：刷新浏览器页面，重新建立连接

### 3. 视频延迟很高
- **原因**：网络延迟或服务器负载高
- **解决**：检查网络连接，确保avatar图片已加载完成

## 当前可用的Avatars
- `test_yongen`
- `yongen`
- `g`

