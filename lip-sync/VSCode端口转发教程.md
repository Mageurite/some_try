# VSCode Remote SSH 端口转发完整教程

## 🎯 问题已解决！

✅ 服务器端所有服务正常运行
✅ 端口8615正在监听
✅ webrtcapi.html可以访问

**现在只需要配置VSCode端口转发即可！**

---

## 📝 VSCode端口转发配置（3种方法）

### 方法1️⃣: 使用PORTS面板（最简单）✨

1. 在VSCode底部，找到并点击 **"PORTS"** 标签页
   
   ![位置：通常在TERMINAL、PROBLEMS、OUTPUT旁边]

2. 如果看到端口8615在列表中：
   - ✅ 已经转发了！直接跳到"访问测试"步骤
   
3. 如果没有看到8615：
   - 点击 **"Forward a Port"** 按钮（+号图标）
   - 输入: `8615`
   - 按回车确认

4. 确认端口状态：
   - ✅ 绿色圆点 = 转发成功
   - ⚠️  黄色/红色 = 有问题，删除后重新添加

---

### 方法2️⃣: 使用命令面板

1. 按快捷键：
   - Windows/Linux: `Ctrl + Shift + P`
   - Mac: `Cmd + Shift + P`

2. 输入: `Forward a Port`

3. 选择: **"Forward a Port"**

4. 输入端口号: `8615`

5. 按回车确认

---

### 方法3️⃣: 手动SSH端口转发（备用）

如果VSCode自动转发不工作，在你的**本地电脑**打开新终端：

```bash
# 替换成你的实际用户名和服务器地址
ssh -L 8615:localhost:8615 你的用户名@服务器IP

# 保持这个终端打开
```

---

## 🌐 访问测试

配置好端口转发后，在你的**本地浏览器**（不是服务器上的）打开：

```
http://localhost:8615/webrtcapi.html
```

**期望结果**：
- 看到一个页面，有 "Start" 按钮
- 点击 "Start" 后，视频开始加载

---

## 🔍 故障排查

### 问题1: 浏览器显示"无法访问此网站"

**原因**: 端口转发未生效

**解决**:
1. 检查VSCode PORTS标签，8615端口是否显示
2. 删除8615端口，重新添加
3. 重启VSCode的Remote SSH连接

---

### 问题2: 页面可以打开，但点击Start没反应

**解决**:
1. 按F12打开浏览器开发者工具
2. 查看Console标签的错误信息
3. 查看Network标签，看/offer请求是否成功

---

### 问题3: VSCode PORTS标签找不到

**解决**:
1. 点击VSCode底部的 "TERMINAL" 右侧
2. 应该能看到 PORTS、OUTPUT、DEBUG CONSOLE等
3. 如果没有，尝试: View -> Terminal

---

### 问题4: 端口转发显示红色/黄色警告

**解决**:
1. 在PORTS标签，右键点击8615端口
2. 选择 "Stop Forwarding Port"
3. 重新添加端口转发
4. 如果还是不行，重启VSCode

---

## 📸 VSCode PORTS标签参考

```
┌─────────────────────────────────────────────┐
│  PORTS                                      │
├──────────┬─────────────┬───────────────────┤
│ 端口     │ 地址         │ 名称              │
├──────────┼─────────────┼───────────────────┤
│ ● 8615   │ localhost   │ Avatar WebRTC     │
│ ● 8606   │ localhost   │ Live Server       │
└──────────┴─────────────┴───────────────────┘

● 绿色 = 正常转发
⚠ 黄色 = 有警告  
⭘ 红色 = 转发失败
```

---

## ✅ 成功标志

当一切正常时，你应该看到：

1. VSCode PORTS标签
   - ✅ 8615端口显示绿色圆点

2. 本地浏览器访问 http://localhost:8615/webrtcapi.html
   - ✅ 页面正常加载
   - ✅ 有"Start"按钮
   - ✅ 点击Start后，视频开始播放

---

## 🎓 为什么之前能用，现在不能？

可能的原因：
1. **进程冲突** - 有多个app.py进程（已修复✅）
2. **VSCode端口转发过期** - Remote SSH重连后需重新转发
3. **端口被其他进程占用** - 已清理（已修复✅）

---

## 💡 小提示

### 永久保存端口转发
在VSCode的PORTS标签：
1. 右键点击8615端口
2. 选择 "Set Port Label" 给它命名（如"Avatar"）
3. 这样更容易识别

### 查看更多端口信息
在PORTS标签右键菜单：
- "Change Port Visibility" - 设置端口可见性
- "Copy Local Address" - 复制本地访问地址
- "Open in Browser" - 直接在浏览器打开

---

## 🆘 还是不行？

请提供以下信息：

1. VSCode PORTS标签的截图
2. 本地浏览器控制台的错误（F12 -> Console）
3. VSCode版本号（Help -> About）
4. 操作系统（Windows/Mac/Linux）

---

**祝你成功！🎉**






